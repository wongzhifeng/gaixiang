# Zeabur 部署配置 - 街巷社区互助平台（Next.js 全栈应用）

# 构建配置
build:
  dockerfile: Dockerfile
  context: .

# 环境变量配置
env:
  # 数据库配置 - 使用 Zeabur PostgreSQL 模板服务
  DATABASE_URL: "postgresql://postgres:${postgresql-PASSWORD}@postgresql.zeabur.internal:5432/postgres"
  
  # NextAuth.js 配置
  NEXTAUTH_SECRET: ${{ secrets.NEXTAUTH_SECRET }}
  NEXTAUTH_URL: ${{ secrets.NEXTAUTH_URL }}
  
  # 应用配置
  NODE_ENV: production

# 资源分配
resources:
  cpu: 0.5
  memory: 512Mi

# 健康检查
healthCheck:
  path: /api/health
  port: 3000
  initialDelay: 30
  period: 10

# 端口配置
ports:
  - port: 3000
    protocol: HTTP